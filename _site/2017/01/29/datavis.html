<!DOCTYPE html>
<html class="no-js">
  <head>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Beautiful and informative data visualisation</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<!-- CSS -->
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!-- Js -->
<script src="/js/vendor/modernizr-2.6.2.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/min/waypoints.min.js"></script>
<script src="/js/jquery.counterup.js"></script>

<!-- Google Map -->
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="/js/google-map-init.js"></script>


<script src="/js/main.js"></script>


  </head>
  <body>


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <!-- header Nav Start -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://jade.github.io/">
              <img src="/img/jade-logo.png" alt="Logo">
            </a>
          </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
               <!-- <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="http://localhost:4000//blog">Blog</a></li>-->
                <li><a href="http://localhost:4000//consortium">Consortium</a></li>
                <li><a href="http://localhost:4000//access">Access</a></li>
                <li><a href="http://localhost:4000//news">News and Events</a></li>
                <li><a href="http://localhost:4000//support">Support</a></li>
                <li><a href="http://localhost:4000//links">Useful links</a></li>
                <!--<li><a href="/contact">Contact</a></li>-->
              </ul>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
    </div>
  </div>
</header><!-- header close -->



    <div class="post">
  <!-- Wrapper Start -->
  <section id="intro" style="border: 1px dotted #ddd;">
    <div class="container">
      <div class="row">
        <div>
          <div class="block">
            <h1>Beautiful and informative data visualisation</h1>
            <div class="post-info-wrapper">
              <p class="italic">By <span class="bold">Gergana</span> on <span class="bold">January 29, 2017</span></p>
            </div>
            <hr />
            <p><div class="block">
	<center>
		<img src="/img/tutheadervis.png" alt="Img" />
	</center>
</div>

<h3 id="tutorial-aims">Tutorial Aims:</h3>

<h4 id="-1-get-familiar-with-the-ggplot2-syntax-"><a href="#ggplot"> 1. Get familiar with the ggplot2 syntax </a></h4>

<h4 id="-2-practice-making-different-plots-with-ggplot2-"><a href="#practice"> 2. Practice making different plots with ggplot2 </a></h4>

<h4 id="-3-learn-to-arrange-graphs-in-a-panel-and-to-save-files"><a href="#panel"> 3. Learn to arrange graphs in a panel and to save files</a></h4>

<p><a name="ggplot"></a></p>

<p><b>Note : all the files you need to complete this tutorial can be downloaded from <a href="https://github.com/ourcodingclub/CC-4-Datavis" target="_blank">this repository</a>. Clone and download the repo as a zip file, then unzip it.</b></p>

<h3 id="1-good-data-visualisation-and-ggplot2-syntax">1. Good data visualisation and ggplot2 syntax</h3>

<p>We’ve learned <a href="https://ourcodingclub.github.io/2016/11/13/intro-to-r.html" target="_blank">how to import our data in RStudio</a>, <a href="https://ourcodingclub.github.io/2017/01/16/piping.html" target="_blank">format and manipulate them</a>, <a href="https://ourcodingclub.github.io/2016/11/24/rmarkdown-1.html" target="_blank">write scripts and Markdown reports…</a> and now it’s time we talk about communicating the results of our analyses - data visualisation! When it comes to data visualisation, the package <code class="highlighter-rouge">ggplot2</code> by Hadley Wickham has won over many scientists’ hearts. In this tutorial, we will learn how to make beautiful and informative graphs and how to arrange them in a panel. Before we take on the <code class="highlighter-rouge">ggplot2</code> syntax, let’s briefly cover what good graphs have in common.</p>

<center><img src="/img/davis_10_steps.png" alt="Img" style="width: 1100px;" /> </center>

<p><code class="highlighter-rouge">ggplot2</code> is a great package to guide you through those steps. The <code class="highlighter-rouge">gg</code> in <code class="highlighter-rouge">ggplot2</code> stands for grammar of graphics. Writing the code for your graph is like constructing a sentence made up of different parts that logically follow from one another. In a data visualisation context, the different elements of the code represent layers - first you make an empty plot, then you add a layer with your data points, then your measure of uncertainty, the axis labels and so on.</p>

<p><b> When using <code class="highlighter-rouge">ggplot2</code>, you usually start your code with <code class="highlighter-rouge">ggplot(your_data, aes(x=independent_variable, y=dependent_variable))</code>, then you add the type of plot you want to make using <code class="highlighter-rouge">+ geom_boxplot()</code>, <code class="highlighter-rouge">+ geom_histogram()</code>, etc. <code class="highlighter-rouge">aes</code> stands for aesthetics, hinting to the fact that using <code class="highlighter-rouge">ggplot2</code> you can make aesthetically pleasing graphs - there are many <code class="highlighter-rouge">ggplot2</code> functions to help you clearly communicate your results, and we will now go through some of them.</b></p>

<h3 id="2-making-different-plots-with-ggplot2">2. Making different plots with ggplot2</h3>

<p>Open RStudio, select <code class="highlighter-rouge">File/New File/R script</code> and start writing your script with the help of this tutorial.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># Purpose of the script
# Your name, date and email
</span><span class="w">
</span><span class="c1"># Libraries - if you haven't installed them before, run the code install.packages("package_name")
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">gridExtra</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>We will use data from the <a href="http://www.livingplanetindex.org/home/index" target="_blank">Living Planet Index</a>, which you have already downloaded from <a href="https://github.com/ourcodingclub/CC-4-Datavis" target="_blank">the repository</a> (Click on <code class="highlighter-rouge">Clone or Download/Download ZIP</code> and then unzip the files). When you run the <code class="highlighter-rouge">read.csv(file.choose())</code> code, a window will pop up, from where you can navigate to the folder where you saved the LPI csv file.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># Import data from the Living Planet Index - population trends of vertebrate species from 1970 to 2014
</span><span class="n">LPI</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file.choose</span><span class="p">())</span><span class="w">
</span></code></pre>
</div>

<p>The data are in wide format - the different years are column names, when really they should be rows. We will reshape the data using the <code class="highlighter-rouge">gather()</code> function from the <code class="highlighter-rouge">tidyr</code> package.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># Reshape data into long form
# By adding 9:53, we select rows from 9 to 53, the ones for the different years of monitoring
</span><span class="n">LPI2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">LPI</span><span class="p">,</span><span class="w"> </span><span class="s2">"year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"abundance"</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="o">:</span><span class="m">53</span><span class="p">)</span><span class="w">
</span><span class="n">View</span><span class="p">(</span><span class="n">LPI2</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>There is an ‘X’ in front of all the years - when we imported the data, all column names become characters. R put an ‘X’ in front of the years to turn the numbers into characters. Now that the years are rows, not columns, we need them to be proper numbers, so we will transform them using <code class="highlighter-rouge">parse_number</code> from the ``readr` package.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">LPI2</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">parse_number</span><span class="p">(</span><span class="n">LPI2</span><span class="o">$</span><span class="n">year</span><span class="p">)</span><span class="w">

</span><span class="c1"># When manipulating data it's always good check if the variables have stayed how we want them
# Use the str() function
</span><span class="n">str</span><span class="p">(</span><span class="n">LPI2</span><span class="p">)</span><span class="w">

</span><span class="c1"># Abundance is a character variable, when it should be numeric, let's fix that
</span><span class="n">LPI2</span><span class="o">$</span><span class="n">abundance</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">LPI2</span><span class="o">$</span><span class="n">abundance</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>This is a very large dataset, so for the first few graphs we will focus on how the population of one species has changed. Pick a species of your choice, make sure you spell it the same way as it is entered in the dataframe.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">vulture</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">LPI2</span><span class="p">,</span><span class="w"> </span><span class="n">Common.Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Griffon vulture / Eurasian griffon"</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">vulture</span><span class="p">)</span><span class="w">

</span><span class="c1"># There are a lot of NAs in this dataframe, so we will get rid of the empty rows using na.omit()
</span><span class="n">vulture</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">na.omit</span><span class="p">(</span><span class="n">vulture</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><a name="practice"></a></p>

<h3 id="histogram-to-visualise-data-distribution">Histogram to visualise data distribution</h3>

<p>We will do a quick comparison between base R graphics and <code class="highlighter-rouge">ggplot2</code> - of course both can make good graphs when used well, but here at Coding Club, we like working with <code class="highlighter-rouge">ggplot2</code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># With base R graphics
</span><span class="n">base_hist</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">hist</span><span class="p">(</span><span class="n">vulture</span><span class="o">$</span><span class="n">abundance</span><span class="p">)</span><span class="w">

</span><span class="c1"># With ggplot2
</span><span class="p">(</span><span class="n">vulture_hist</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">vulture</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">abundance</span><span class="p">))</span><span class="w">  </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_histogram</span><span class="p">())</span><span class="w"> </span><span class="c1"># putting your entire ggplot code in () creates the graph and shows it in the plot viewer
</span></code></pre>
</div>

<center> <img src="/img/base_hist.png" alt="Img" style="width: 500px;" /> <img src="/img/gg_hist.png" alt="Img" style="width: 500px;" /> </center>

<p>The ggplot one is a bit prettier, but the default ggplot settings are not ideal, there is lots of unnecessary grey space behind the histogram, the axes labels are quite small, and the bars blend with each other; so lets beautify the histogram a bit. This is where the true power of <code class="highlighter-rouge">ggplot2</code> shines!</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="p">(</span><span class="n">vulture_hist</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">vulture</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">abundance</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">binwidth</span><span class="o">=</span><span class="m">250</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="o">=</span><span class="s2">"#8B5A00"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="s2">"#CD8500"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">    </span><span class="c1"># Changing the binwidth and colours
</span><span class="w">  </span><span class="n">geom_vline</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xintercept</span><span class="o">=</span><span class="n">mean</span><span class="p">(</span><span class="n">abundance</span><span class="p">)),</span><span class="w">                         </span><span class="c1"># Adding a line for mean abundance
</span><span class="w">             </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">linetype</span><span class="o">=</span><span class="s2">"dashed"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                </span><span class="c1"># Changing the look of the line
</span><span class="w">    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">                                                      </span><span class="c1"># Changing the theme to get rid of the grey background
</span><span class="w">  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Count\n"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                                                   </span><span class="c1"># Changing the text of the y axis label
</span><span class="w">  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"\nGriffon vulture abundance"</span><span class="p">)</span><span class="w">  </span><span class="o">+</span><span class="w">                              </span><span class="c1"># \n adds a blank line
</span><span class="w">  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">                            </span><span class="c1"># Changing font size of axis labels
</span><span class="w">        </span><span class="n">axis.text.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.title.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             </span><span class="c1"># Changing font size of axis titles
</span><span class="w">        </span><span class="n">axis.title.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             </span><span class="c1"># face="plain" changes font type, could also be italic, etc
</span><span class="w">        </span><span class="n">panel.grid.major.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                           </span><span class="c1"># Removing the grey grid lines
</span><span class="w">        </span><span class="n">panel.grid.minor.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">panel.grid.minor.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">panel.grid.major.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">)))</span><span class="w">              </span><span class="c1"># Putting a 1 cm margin around the plot
</span><span class="w">
</span><span class="c1"># We can see from the histogram that the data are very skewed - a typical distribution of count abundance data
</span></code></pre>
</div>

<p><img src="/img/gg_hist2.png" alt="Img" style="width: 769px;" /></p>

<p><strong>Figure 1. Histogram of Griffon vulture abundance in populations included in the LPI dataset. Red line shows mean abundance.</strong></p>

<p><strong>Pressing enter after each “layer” of your plot (i.e. indenting it) prevents the code from being one gigantic line and makes it much easier to read.</strong></p>

<p><a name="colourpicker"></a></p>

<p>In the code above you can see a colour code <code class="highlighter-rouge">colour="#8B5A00"</code> - each colour has a code, a combination of letters and numbers. You can get the codes for different colours online, from Paint, Photoshop or similar programs, or even from RStudio, which is very convenient! There is an RStudio Colourpicker addin - to install it, run the following code:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"colourpicker"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>To find out what is the code for a colour you like, click on <code class="highlighter-rouge">Addins/Colour picker</code>.</p>

<center><img src="/img/colourpicker.png" alt="Img" style="width: 800px;" /></center>

<p>When you click on <code class="highlighter-rouge">All R colours</code> you will see lots of different colours you can choose from - a good colour scheme makes your graph stand out, but of course, don’t go crazy with the colours. When you click on <code class="highlighter-rouge">1</code>, and then on a certain colour, you fill up <code class="highlighter-rouge">1</code> with that colour, same goes for <code class="highlighter-rouge">2</code>, <code class="highlighter-rouge">3</code> - you can add mode colours with the <code class="highlighter-rouge">+</code>, or delete them by clicking the bin. Once you’ve made your pick, click <code class="highlighter-rouge">Done</code>. You will see a line of code <code class="highlighter-rouge">c("#8B5A00", "#CD8500")</code> appear - in this case, we just need the colour code, so we can copy that, and delete the rest. Try changing the colour of the histogram you made just now.</p>

<center><img src="/img/colourpicker2.png" alt="Img" style="width: 800px;" /></center>

<h3 id="scatter-plot-to-examine-how-griffon-vulture-populations-have-changed-between-1970-and-2017-in-croatia-and-italy">Scatter plot to examine how Griffon vulture populations have changed between 1970 and 2017 in Croatia and Italy</h3>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># Filtering the data to get records only from Croatia and Italy using the `filter()` function from the `dplyr` package
</span><span class="n">vultureITCR</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">vulture</span><span class="p">,</span><span class="w"> </span><span class="n">Country.list</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Croatia"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Italy"</span><span class="p">))</span><span class="w">

</span><span class="c1"># Using default base graphics
</span><span class="n">plot</span><span class="p">(</span><span class="n">vultureITCR</span><span class="o">$</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">vultureITCR</span><span class="o">$</span><span class="n">abundance</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vultureITCR</span><span class="o">$</span><span class="n">Country.list</span><span class="p">)</span><span class="w">

</span><span class="c1"># Using default ggplot2 graphics
</span><span class="p">(</span><span class="n">vulture_scatter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">vultureITCR</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">abundance</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="o">=</span><span class="n">Country.list</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_point</span><span class="p">())</span><span class="w">
</span></code></pre>
</div>

<center> <img src="/img/base_scatter.png" alt="Img" style="width: 500px;" /> <img src="/img/gg_scatter1.png" alt="Img" style="width: 500px;" /> </center>

<p><strong>Hopefully by now we’ve convinced you of the perks of ggplot2, but again like with the histogram, the graph needs a bit more work.</strong>
You might have noticed that sometimes we have the <code class="highlighter-rouge">colour=</code> argument surrounded by <code class="highlighter-rouge">aes()</code> and sometimes we don’t. If you are designating colours based on a certain categorical variable in your data, like here <code class="highlighter-rouge">colour = Country.list</code>, then that goes in the <code class="highlighter-rouge">aes()</code> argument. If you just want to give the lines, dots or bars a certain colour, then you can use e.g. <code class="highlighter-rouge">colour = "blue"</code> and that does not need to be surrounded by <code class="highlighter-rouge">aes()</code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="p">(</span><span class="n">vulture_scatter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">vultureITCR</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">abundance</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="o">=</span><span class="n">Country.list</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                                                </span><span class="c1"># Changing point size
</span><span class="w">    </span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">lm</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">Country.list</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">                    </span><span class="c1"># Adding a linear model fit and colour-coding by country
</span><span class="w">    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_fill_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#EE7600"</span><span class="p">,</span><span class="w"> </span><span class="s2">"#00868B"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">               </span><span class="c1"># Adding custom colours
</span><span class="w">    </span><span class="n">scale_colour_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#EE7600"</span><span class="p">,</span><span class="w"> </span><span class="s2">"#00868B"</span><span class="p">),</span><span class="w">               </span><span class="c1"># Adding custom colours
</span><span class="w">                        </span><span class="n">labels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"Croatia"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Italy"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">                 </span><span class="c1"># Adding labels for the legend
</span><span class="w">    </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Griffon vulture abundance\n"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                             
    </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"\nYear"</span><span class="p">)</span><span class="w">  </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">vjust</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">),</span><span class="w">       </span><span class="c1"># making the years at a bit of an angle
</span><span class="w">          </span><span class="n">axis.text.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">
          </span><span class="n">axis.title.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">axis.title.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">panel.grid.major.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                                  </span><span class="c1"># Removing the background grid lines                
</span><span class="w">          </span><span class="n">panel.grid.minor.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.minor.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.major.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">  
          </span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">                    </span><span class="c1"># Adding a 1cm margin around the plot
</span><span class="w">    </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">                  </span><span class="c1"># Setting the font for the legend text
</span><span class="w">          </span><span class="n">legend.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                                      </span><span class="c1"># Removing the legend title
</span><span class="w">          </span><span class="n">legend.position</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">0.9</span><span class="p">,</span><span class="w"> </span><span class="m">0.9</span><span class="p">)))</span><span class="w">                  </span><span class="c1"># Setting the position for the legend - 0 is left/bottom, 1 is top/right
</span></code></pre>
</div>

<p><img src="/img/gg_scatter3.png" alt="Img" style="width: 769px;" /></p>

<p><strong>Figure 2. Population trends of Griffon vulture in Croatia and Italy. Data points represent raw data with a linear model fit and 95% confidence intervals. Abundance is measured in number of breeding individuals.</strong></p>

<p><strong>If your axis labels need to contain fancy characters or superscript, you can get <code class="highlighter-rouge">ggplot2</code> to plot that, too. It might require some googling regarding your specific case, but for example, this code <code class="highlighter-rouge">ylabs(expression(paste("Grain yield","  ","(ton.", ha^-1,")", sep="")))</code> will create a y axis with a Grain yield ton. ha^-1 label.</strong></p>

<h3 id="boxplot-to-examine-whether-vulture-abundance-differs-between-croatia-and-italy">Boxplot to examine whether vulture abundance differs between Croatia and Italy</h3>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="p">(</span><span class="n">vulture_boxplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="w"> </span><span class="p">(</span><span class="n">vultureITCR</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Country.list</span><span class="p">,</span><span class="w"> </span><span class="n">abundance</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_boxplot</span><span class="p">())</span><span class="w">

</span><span class="c1"># Beautifying
</span><span class="w">
</span><span class="p">(</span><span class="n">vulture_boxplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="w"> </span><span class="p">(</span><span class="n">vultureITCR</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Country.list</span><span class="p">,</span><span class="w"> </span><span class="n">abundance</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_boxplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">Country.list</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_fill_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#EE7600"</span><span class="p">,</span><span class="w"> </span><span class="s2">"#00868B"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">               </span><span class="c1"># Adding custom colours
</span><span class="w">    </span><span class="n">scale_colour_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#EE7600"</span><span class="p">,</span><span class="w"> </span><span class="s2">"#00868B"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="c1"># Adding custom colours
</span><span class="w">    </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Griffon vulture abundance\n"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                             
    </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"\nCountry"</span><span class="p">)</span><span class="w">  </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">
          </span><span class="n">axis.text.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">
          </span><span class="n">axis.title.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">axis.title.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">panel.grid.major.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                           </span><span class="c1"># Removing the background grid lines                
</span><span class="w">          </span><span class="n">panel.grid.minor.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.minor.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.major.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">  
          </span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">),</span><span class="w">               </span><span class="c1"># Adding a margin
</span><span class="w">          </span><span class="n">legend.position</span><span class="o">=</span><span class="s2">"none"</span><span class="p">))</span><span class="w">                                      </span><span class="c1"># Removing the legend - not needed with only two factors
</span></code></pre>
</div>

<p><img src="/img/gg_boxplot2.png" alt="Img" style="width: 769px;" /></p>

<p><strong>Figure 3. Griffon vulture abundance in Croatia and Italy.</strong></p>

<h3 id="barplot-to-examine-the-species-richness-of-a-few-european-countries">Barplot to examine the species richness of a few European countries</h3>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># Calculating species richness using pipes ``%&gt;%` from the `dplyr` package
</span><span class="n">richness</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">LPI2</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="p">(</span><span class="n">Country.list</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"United Kingdom"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Germany"</span><span class="p">,</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Netherlands"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Italy"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
            </span><span class="n">group_by</span><span class="p">(</span><span class="n">Country.list</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
            </span><span class="n">mutate</span><span class="w"> </span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">richness</span><span class="o">=</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">Common.Name</span><span class="p">))))</span><span class="w">

</span><span class="p">(</span><span class="n">richness_barplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">richness</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Country.list</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">richness</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position_dodge</span><span class="p">(),</span><span class="w"> </span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="s2">"#00868B"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Species richness\n"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">                             
    </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">)</span><span class="w">  </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">vjust</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">),</span><span class="w">  </span><span class="c1"># x axis labels angled, so that text doesn't overlap
</span><span class="w">          </span><span class="n">axis.text.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">),</span><span class="w">
          </span><span class="n">axis.title.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">axis.title.y</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">),</span><span class="w">             
          </span><span class="n">panel.grid.major.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                                          
          </span><span class="n">panel.grid.minor.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.minor.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">panel.grid.major.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">  
          </span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">)))</span><span class="w">
</span></code></pre>
</div>

<p><img src="/img/gg_bar2.png" alt="Img" style="width: 769px;" /></p>

<p><strong>Figure 4. Species richness in five European countries. Based on LPI data.</strong></p>

<p><strong>You might be picking up on the fact that we repeat a lot of the same code - same font size, same margins, etc. Less repetition makes for tidier code and it’s important to have consistent formatting across graphs for the same project, so in our next tutorial we will learn how to write our own functions and loops to create multiple plots at once!</strong></p>

<p><a name="panel"></a></p>

<h3 id="arranging-plots-in-a-panel-using-gridarrange-from-the-package-gridextra">Arranging plots in a panel using <code class="highlighter-rouge">grid.arrange()</code> from the package <code class="highlighter-rouge">gridExtra</code></h3>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">grid.arrange</span><span class="p">(</span><span class="n">vulture_hist</span><span class="p">,</span><span class="w"> </span><span class="n">vulture_scatter</span><span class="p">,</span><span class="w"> </span><span class="n">vulture_boxplot</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="c1"># This doesn't look right - the graphs are too stretched, the legend and text are all messed up, the white margins are too big
# Fixing the problems - adding ylab() again overrides the previous settings
</span><span class="w">
</span><span class="n">panel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">grid.arrange</span><span class="p">(</span><span class="n">vulture_hist</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"(a)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Count"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Abundance"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">   </span><span class="c1"># adding labels to the different plots
</span><span class="w">                 </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">)),</span><span class="w">
               </span><span class="n">vulture_boxplot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"(b)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Abundance"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
                 </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">)),</span><span class="w">
               </span><span class="n">vulture_scatter</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"(c)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Abundance"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Year"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
                 </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"cm"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
                 </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">               
                       </span><span class="n">legend.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">                                   
                       </span><span class="n">legend.position</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">0.85</span><span class="p">,</span><span class="w"> </span><span class="m">0.85</span><span class="p">)),</span><span class="w"> </span><span class="c1"># changing the legend position so that it fits within the panel
</span><span class="w">               </span><span class="n">ncol</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># ncol determines how many columns you have
</span></code></pre>
</div>

<p>To get around the too stretched/too squished panel problems, we will save the file and give it exact dimensions using ``ggsave`.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">ggsave</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="s2">"vulture_panel2.png"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="m">12</span><span class="p">)</span><span class="w"> </span><span class="c1"># the file is saved in your working directory, find it with getwd()
</span></code></pre>
</div>

<p><img src="/img/vulture_panel2.png" alt="Img" style="width: 500px;" /></p>

<p><strong>Figure 5. Examining Griffon vulture populations from the LPI dataset. (a) shows histogram of abundance data distribution, (b) shows a boxplot comparison of abundance in Croatia and Italy, and (c) shows population trends between 1970 and 2014 in Croatia and Italy.</strong></p>

<h3 id="a-team-figure-beautification-challenge">A team figure beautification challenge</h3>

<p>To practice making graphs, open the <code class="highlighter-rouge">Graph_challenge.R</code> script file that you unzipped from the repository at the start of this tutorial and follow the instructions. Once you have made your figures, please upload them to <a href="https://drive.google.com/drive/folders/0B7mgZ2NLgHGMT3BUV0ZrcV9teHc?usp=sharing" target="_blank">this Google Drive folder.</a></p>

<hr />

<hr />

<h4 id="check-out-our-useful-links-page-where-you-can-find-great-resources-to-help-you-make-beautiful-and-informative-graphs">Check out our <a href="https://ourcodingclub.github.io/links/" target="_blank">Useful links</a> page where you can find great resources to help you make beautiful and informative graphs!</h4>

<h4 id="if-you-have-any-questions-about-completing-this-tutorial-please-contact-us-on-ourcodingclubgmailcom">If you have any questions about completing this tutorial, please contact us on ourcodingclub@gmail.com</h4>

<h4 id="we-would-love-to-hear-your-feedback-on-the-tutorial-whether-you-did-it-in-the-classroom-or-online">We would love to hear your feedback on the tutorial, whether you did it in the classroom or online:</h4>

<h4 id="httpswwwsurveymonkeycoukr83wv8hv"><a href="https://www.surveymonkey.co.uk/r/83WV8HV">https://www.surveymonkey.co.uk/r/83WV8HV</a></h4>

<ul class="social-icons">
	<li>
		<h3>
			<a href="https://twitter.com/our_codingclub" target="_blank">&nbsp;Follow our coding adventures on Twitter! <i class="fa fa-twitter"></i></a>
		</h3>
	</li>
</ul>

<h3 id="subscribe-to-our-mailing-list">  Subscribe to our mailing list:</h3>
<div class="container">
	<div class="block">
        <!-- subscribe form start -->
		<div class="form-group">
			<form action="https://getsimpleform.com/messages?form_api_token=de1ba2f2f947822946fb6e835437ec78" method="post">
			<div class="form-group">
				<input type="text" class="form-control" name="Email" placeholder="Email" required="" />
			</div>
			<div>
                        	<button class="btn btn-default" type="submit">Subscribe</button>
                    	</div>
                	</form>
		</div>
	</div>
</div>
</p>
          </div>
        </div><!-- .col-md-7 close -->
      </div>
    </div>
  </section>
</div>
<p class="center-text" style="padding: 30px;">
  <a href="/blog">Back to blog</a>
</p>











    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="footer-manu">
          <ul>
            <li><a href="/consortium">About Us</a></li>
        <!--    <li><a href="/contact">Contact us</a></li>-->
          </ul>
        </div>
        <p>Content by <a href="/about/">..</a>.</p>
        <p>Copyright &copy; Design &amp; Developed by <a href="http://www.themefisher.com">Themefisher</a>. All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>

    

    </body>
</html>

